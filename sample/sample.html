<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="../src/jquery.one_time_action.js"></script>
    <script type="text/javascript">
      jQuery(function($){
        /**
         * Prints 'X' next to given element. Shows that something happened.
         */
        var alert_action = function(e) {
          var s = $(e).find("~ span");
          s.html("X" + s.html());
        };

        $("li").append("<span/>");
        var onces= $(".once").one_time_action({add_class: "disabled"});
        var reacts = $(".reactivate").one_time_action({add_class: "disabled", reactivate: 1500});

        onces.add(reacts).click(function(evt) {
          alert("xxx");
          evt.preventDefault();
          alert_action(this);
        });
      });
    </script>

    <style type="text/css">
      .disabled { text-decoration: line-through; }
      span { color: #aaa; }
    </style>
  </head>
  <body>
    <h1>one_time_action</h1>

    <form action="">
      <ul>
        <li><a href="#" class="once">Once</a></li>
        <li><a href="#" class="reactivate">Reactivating</a></li>
        <li><input type="submit" class="once" value="Once"/></li>
        <li><input type="submit" class="reactivate" value="Reactivating"/></li>
        <li><input type="button" onclick="alert('xxx');"class="once" value="Once"/></li>
        <li><input type="button" class="reactivate" value="Reactivating"/></li>
      </ul>
    </form>
  </body>
</html>